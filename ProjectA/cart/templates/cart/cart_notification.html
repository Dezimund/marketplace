<!-- Cart Notification - сповіщення про додавання товару -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1100;">
    <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" id="cartNotification">
        <div class="toast-header bg-success text-white">
            <i class="bi bi-check-circle-fill me-2"></i>
            <strong class="me-auto">Товар додано</strong>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            <div class="d-flex align-items-center gap-3">
                {% if product.main_image %}
                <img src="{{ product.main_image.url }}"
                     alt="{{ product.name }}"
                     class="rounded"
                     style="width: 60px; height: 60px; object-fit: cover;">
                {% else %}
                <div class="rounded bg-light d-flex align-items-center justify-content-center"
                     style="width: 60px; height: 60px;">
                    <i class="bi bi-image text-muted"></i>
                </div>
                {% endif %}
                <div class="flex-grow-1">
                    <p class="mb-1 fw-medium">{{ product.name }}</p>
                    {% if size %}
                    <small class="text-muted">Розмір: {{ size }}</small>
                    {% endif %}
                </div>
            </div>
            <hr>
            <div class="d-flex justify-content-between align-items-center">
                <span class="text-muted">
                    <i class="bi bi-cart3 me-1"></i>
                    В кошику: {{ cart_total_items }} товарів
                </span>
                <a href="#"
                   class="btn btn-success btn-sm"
                   data-bs-toggle="offcanvas"
                   data-bs-target="#cartOffcanvas"
                   data-bs-dismiss="toast">
                    Переглянути кошик
                </a>
            </div>
        </div>
    </div>
</div>

<script>
// Автоматичне приховування через 5 секунд
setTimeout(function() {
    const toast = document.getElementById('cartNotification');
    if (toast) {
        const bsToast = new bootstrap.Toast(toast);
        bsToast.hide();
    }
}, 5000);

// Оновлення лічильника в хедері
document.dispatchEvent(new CustomEvent('cart-updated', {
    detail: { total_items: {{ cart_total_items }} }
}));
</script>